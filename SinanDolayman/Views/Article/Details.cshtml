@model Entities.Article

@{
    ViewBag.Title = Model.Title;
}




<div class="share-btn-container">
    <a target="_blank" onclick="setFrefFace('@Model.Title')" href="" id="shareFB">
        <i class="fab fa-facebook"></i>
    </a>
    <a target="_blank" onclick="setFrefTwitter('@Model.Title')" id="shareTw" href="#">
        <i class="fab fa-twitter"></i>
    </a>
    <a target="_blank" onclick="setFrefLinkedin('@Model.Title')" id="shareLn" href="#">
        <i class="fab fa-linkedin"></i>
    </a>
    <a target="_blank" onclick="setFrefPinterest('@Model.CoverImage')" id="sharePn" href="#">
        <i class="fab fa-pinterest"></i>
    </a>
    <a target="_blank" onclick="setFrefWhatsapp('@Model.Title')" id="shareWs" href="#">
        <i class="fab fa-whatsapp"></i>
    </a>
</div>
<div class="content">
    <h1>
        @Html.DisplayFor(model => model.Title)
    </h1>

    <p>
        @Html.Raw(Model.Content)
        <br />
        @Html.DisplayFor(model => model.CreateDate)
    </p>
    <div style="max-width:700px" class="card">
        <img id="detayresim" style="max-width:700px" src="@Model.CoverImage" class="card-img-bottom" alt="...">
    </div>
    
    <br />
    <p>
        <a class="btn btn-outline-info" data-toggle="collapse" href="#yorumYaz" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="fas fa-comment"></i> Yorum yap
        </a>

    </p>
    <div class="collapse" id="yorumYaz">
        @{
            <div class="card card-body">
                <input id="commenterInput" placeholder="Adınızı girin..." class="form-control" name="commenter" />
                <br />
                <textarea id="commentArea" name="comment" style="min-height:130px" placeholder="  Yorumunuzu girin..."></textarea>
                <br />
                <div>
                    <button onclick="sendComment('@Model.Id','Article')" type="submit" class="btn btn-success col-md-1" href="/">Gönder</button>
                </div>



            </div>
        }
    </div>
    <br />
    @foreach (var item in ViewBag.Comments)
    {
        string dinamikInputId = "replierNameInput" + item.Id;
        string dinamikAreaId = "replyContentArea" + item.Id;
        string dinamikCevapYazAlanId = "cevapYaz" + item.Id;
        <p>
            <div>
                <d style="font-size:25px">@item.Commenter &nbsp</d>
                
                <d style="font-size:15px"> @item.Date.ToString("dd.MM.yyyy HH:MM")</d>
            </div>
            @item.Content
        </p>
        <p>
            <a class="btn" style="border:none;color:#17a2b8" data-toggle="collapse" href="#@dinamikCevapYazAlanId" role="button" aria-expanded="false" aria-controls="@dinamikCevapYazAlanId">
                <i class="fas fa-reply"></i> Yanıtla
            </a>

        </p>

        <div class="collapse" id="@dinamikCevapYazAlanId">
            <div class="card card-body">
                <input id="@dinamikInputId" class="form-control" placeholder="Adınızı girin..." name="commenter" />
                <br />
                <textarea id="@dinamikAreaId" name="comment" style="min-height:130px" placeholder=" Yorumunuzu buraya yazınız..."></textarea>
                <br />
                <button onclick="sendCommentReply('@item.Id','@item.Commenter')" type="submit" class="btn btn-success col-md-1" href="/">Gönder</button>
            </div>
        </div>

        <hr>
        foreach (var reply in item.Replies)
        {
            string dinamikCevapInputId = "childReplierNameInput" + reply.Id;
            string dinamikCevapAreaId = "childReplyContentArea" + reply.Id;
            string dinamikCevabaCevapYazAlanId = "childCevapYaz" + reply.Id;
            <div style="margin-left:50px">
                <d style="font-size:25px">@reply.Commenter &nbsp</d>
                <d style="font-size:15px"> @reply.Date.ToString("dd.MM.yyyy HH:MM")</d>
            </div>
            <p style="margin-left:50px">

                @reply.Content
                <br />
                <a class="btn btn-outline-info" style="border:none" data-toggle="collapse" href="#@dinamikCevabaCevapYazAlanId" role="button" aria-expanded="false" aria-controls="@dinamikCevabaCevapYazAlanId">
                    <i class="fas fa-reply"></i> Yanıtla
                </a>
            </p>


            <div class="collapse" id="@dinamikCevabaCevapYazAlanId">
                @{
                    <div class="card card-body">
                        <input id="@dinamikCevapInputId" class="form-control" placeholder="Adınızı girin..." name="commenter" />
                        <br />
                        <textarea id="@dinamikCevapAreaId" name="comment" style="min-height:130px" placeholder=" Yorumunuzu buraya yazınız..."></textarea>
                        <br />
                        <button onclick="sendReplyToReply('@item.Id','@reply.Id','@reply.Commenter')" type="submit" class="btn btn-success col-md-1" href="/">Gönder</button>
                    </div>
                }

            </div>
            <hr>
        }
        <hr>
    }
</div>

<script src="~/Scripts/CommentScript.js"></script>

<script>
    function setFrefFace(title) {
        var t = title;
        document.getElementById("shareFB").setAttribute("href", "https://www.facebook.com/sharer.php?u=" + encodeURIComponent(location.href));
    }
    function setFrefTwitter(title) {
        var t = title;
        document.getElementById("shareTw").setAttribute("href", "https://twitter.com/share?url=" + encodeURIComponent(location.href) + "&text=" + t);
    }
    function setFrefLinkedin(title) {
        var t = title;
        document.getElementById("shareLn").setAttribute("href", "https://www.linkedin.com/shareArticle?url=" + encodeURIComponent(location.href) + "&title=" + t);
    }
    function setFrefPinterest(image) {
        var img = image;
        document.getElementById("sharePn").setAttribute("href", "https://pinterest.com/pin/create/bookmarklet/?media=" + img + "&url=" + encodeURIComponent(location.href));
    }
    function setFrefWhatsapp(title) {
        var t = title;

        document.getElementById("shareWs").setAttribute("href", "https://api.whatsapp.com/send?text=" + t + " " + encodeURIComponent(location.href));
    }
</script>

